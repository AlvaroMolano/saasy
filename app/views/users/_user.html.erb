<p class="input-field">
  <%= label :user, :email %>
  <%= text_field :user, :email %>
</p>

<p class="input-field">
  <%= label :user, :first_name %>
  <%= text_field :user, :first_name %>
</p>

<p class="input-field">
  <%= label :user, :last_name %>
  <%= text_field :user, :last_name %>
</p>

<p class="input-field openid">
  <%= label :user, :identity_url, 'OpenID URL' %>
  <%= text_field :user, :identity_url %>
</p>

<p class="input-indent openid"><%= use_password_link %></p>

<p class="input-field password">
  <%= label :user, :password %>
  <%= password_field :user, :password %>
</p>

<p class="input-field password">
  <%= label :user, :password_confirmation, 'Confirm password' %>
  <%= password_field :user, :password_confirmation %>
</p>

<p class="input-indent password"><%= use_openid_link %></p>

<% content_for(:head) do %>
  <%= javascript_include_tag "credential_toggle" %>
  <script type="text/javascript" charset="utf-8">
    Event.observe(window, 'load', function(){      
      ['first', 'last'].each(function(name){
        new Form.Element.Observer("user_" + name + "_name", 0.2, function(e){
          var el = $(e);
          var el2 = $("card_" + name + "_name");
          el2.value = el.value;
        });
      });
    });
  </script>
<% end %>